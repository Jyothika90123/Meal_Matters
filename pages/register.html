<DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="login.css" />
  </head>
  <body>
    <div>
      <div class="container-fluid registerpage">
        <div class="register align-items-center">
          <div id="registerform">
            <form>
              <div class="top">
                <p class="heading">Sign Up</p>
                <select
                  class="form-select form-control-sm" id="who"
                  aria-label="Default select example"
                >
                  <option selected>Select type</option>
                  <option value="1">Donor</option>
                  <option value="2">Charity organization</option>
                  <option value="3">Volunteer</option>
                </select>
              </div>
              <br />
              <div class="mb-3">
                <label for="exampleInputName1" class="form-label text-form"
                  >Your Name</label
                >
                <input
                  type="text"
                  name="D_name"
                  class="form-control-sm textarea"
                  id="profilename"
                  aria-describedby="emailHelp"
                  placeholder="Enter your name"
                  size="50px"
                />
              </div>

              <!--div class="mb-3">
                <label for="exampleInputName1" class="form-label text-form"
                  >Username</label
                >
                <input
                  type="text"
                  name="username"
                  class="form-control-sm textarea"
                  id="exampleInputName1"
                  aria-describedby="emailHelp"
                  placeholder="Enter your username"
                  size="50px"
                />
              </!--div-->

              <div class="mb-3">
                <label for="exampleInputPassword1" class="form-label text-form"
                  >Password</label>&nbsp
                <input
                  type="password"
                  name="D_password"
                  class="form-control-sm textarea"
                  id="Password1"
                  placeholder="Enter password"
                  size="50px"
                />
              </div>

              <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label text-form"
                  >Email Id</label>&nbsp &nbsp
                <input
                  type="email"
                  name="D_email"
                  class="form-control-sm textarea"
                  id="exampleInputEmail1"
                  placeholder="Enter your email"
                  size="50px"
                />
              </div>

              <div class="mb-3">
                <label for="exampleInputText2" class="form-label text-form"
                  >Address</label><br>
                <input
                  type="text"
                  name="Address"
                  class="class="form-control-sm textarea-sm textarea"
                  id="addr"
                  placeholder="Enter your Address"
                  size="50px"
                />
              </div>

              <div class="mb-3">
                <label for="exampleInputText1" class="form-label text-form"
                  >Contact</label
                >&nbsp &nbsp
                <input
                  type="text"
                  name="Ph_no"
                  class="form-control-sm textarea"
                  id="contact"
                  placeholder="Enter contact number"
                  size="50px"
                />
              </div>

              <div class="mb-3">
                <label for="exampleInputText2" class="form-label text-form"
                  >Restaurant/Individual</label><br>
                <input
                  type="text"
                  name="Restaurant/Individual"
                  class="class="form-control-sm textarea-sm textarea"
                  id="ror"
                  placeholder="Restaurant/Individual"
                  size="50px"
                />
              </div>

              <div class="mb-3">
                <label for="exampleInputText2" class="form-label text-form"
                  >Rating</label> <br>
                <input
                  type="number"
                  name="Rating"
                  class="class="form-control-sm textarea-sm textarea"
                  id="rating"
                  placeholder="Enter rating"
                  size="50px"
                />
              </div>

              <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary loginbtn textarea">
                  Register
                </button>
              </div>
              <p class="newuser">
                Already registered? <a href="login.html">Log In</a>
              </p>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
    const { createClient } = supabase
    supabase = createClient('https://jdpmvcqvpoettcqrwwcp.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkcG12Y3F2cG9ldHRjcXJ3d2NwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDA0MDM1NzEsImV4cCI6MjAxNTk3OTU3MX0.DEVGEK7cU38SsU9fgbP85ERlSLJuPO7gdt_8zcWzsxM')

    const form = document.querySelector('#registerform') //selected the form
    form.addEventListener('submit', async(event) => { 
        event.preventDefault() 
        
        const formips = form.querySelectorAll('input, textarea, select')
        let whoI = document.getElementById('who').value;
        
        if  (whoI==1)
        {
            let datas = {}
            formips.forEach(element => {
                const {value, name} = element //selected object has properties value and name
                if (value) {
                    if (name!='')
                    datas[name] = value
                }
            })
            console.log(datas)
            const { error, data}=await supabase.from('Donor').insert([datas])
            console.log(error, data)
        }
        window.location.href = 'donor.html';
    })
</script>

</html>

